<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" sizes="192x192"
          href="https://studio.d-id.com/favicon/favicon-192x192.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
          rel="stylesheet" />
    <title>Avatar D-ID â€“ Demo Fullscreen</title>
    <link rel="stylesheet" href="/style.css">
  </head>

  <body>
    <!-- Conteneur racine : c'est lui qu'on passe en plein Ã©cran -->
    <div id="app">
      <header class="header">
        <span id="previewName">Agent</span>
        <span id="connectionLabel">Connectingâ€¦</span>

        <!-- bouton plein Ã©cran -->
        <button id="fullscreenButton"
                title="Basculer en plein Ã©cran">
          <span class="material-symbols-outlined">fullscreen</span>
        </button>
      </header>

      <main id="container">
        <!-- flux vidÃ©o provenant de D-ID -->
        <video id="avatarVideo" autoplay playsinline muted></video>

        <!-- overlay avec la zone de saisie & boutons -->
        <div id="uiOverlay">
          <textarea id="textArea"
                    placeholder="Tapez votre message"></textarea>

          <div class="buttons">
            <button id="chatButton"  title="Chat avec lâ€™agent">Chat</button>
            <button id="speakButton" title="Streaming (BYO-LLM)">Speak</button>

            <select id="langSelect"  title="Langue Speech-to-Text">
              <option value="en_US" selected>English</option>
              <option value="es_ES">Spanish</option>
              <option value="fr_FR">French</option>
              <option value="it_IT">Italian</option>
              <option value="de_DE">German</option>
              <option value="he_IL">Hebrew</option>
              <option value="ru_RU">Russian</option>
            </select>
            <button id="speechButton" title="DictÃ©e vocale">ðŸŽ¤</button>
          </div>
        </div>

        <!-- historique de la conversation -->
        <div id="answers"></div>
      </main>

      <!-- panneau affichÃ© si la connexion WebRTC tombe -->
      <section id="hidden" hidden>
        <h2 id="hidden_h2"></h2>
        <button id="reconnectButton" title="Reconnecter WebRTC">Reconnect</button>
      </section>
    </div>

    <!-- scripts -->
    <script type="module" src="/main.js"></script>
    <script defer src="/webSpeechAPI.js"></script>
  </body>
</html>
